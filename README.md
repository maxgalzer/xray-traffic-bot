# üì° XRAY Traffic Telegram Bot

–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç—Ä–∞—Ñ–∏–∫–∞ XRAY/3x-ui –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä—è–º–æ –≤ Telegram: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ—Å–µ—â–µ–Ω–∏–∏ —Å–∞–π—Ç–æ–≤, —Å–≤–æ–¥–∫–∏, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–º–∏ –¥–æ–º–µ–Ω–∞–º–∏ ‚Äî –≤—Å—ë –≤ –æ–¥–Ω–æ–º –±–æ—Ç–µ.

---

## üöÄ –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```bash
bash <(curl -Ls https://raw.githubusercontent.com/–í–ê–®_–Æ–ó–ï–†/xray-traffic-bot/main/install_bot.sh)```
```
–°–∫—Ä–∏–ø—Ç:

- üîÑ –û–±–Ω–æ–≤–∏—Ç —Å–∏—Å—Ç–µ–º—É
- üì¶ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `Python 3`, `pip`, `jq`, `sqlite3`
- üîê –ó–∞–ø—Ä–æ—Å–∏—Ç —É –≤–∞—Å:
  - `TELEGRAM_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
  - `CHAT_ID` ‚Äî ID —á–∞—Ç–∞, –∫—É–¥–∞ –±–æ—Ç –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  - `cron`-–∏–Ω—Ç–µ—Ä–≤–∞–ª (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤)
- üìÅ –°–æ–∑–¥–∞—Å—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É `/opt/xray-traffic-bot/` —Å–æ –≤—Å–µ–º–∏ —Ñ–∞–π–ª–∞–º–∏ –∏ –ë–î
- üß† –£—Å—Ç–∞–Ω–æ–≤–∏—Ç `systemd`-—Å–µ—Ä–≤–∏—Å –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞
- üóÇ –î–æ–±–∞–≤–∏—Ç `cron`-–∑–∞–¥–∞—á—É –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–≤–æ–¥–∫–∏
- üõ† –ù–∞–π–¥—ë—Ç `config.json` –æ—Ç Xray/3x-ui –∏:
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç, –≤–∞–ª–∏–¥–Ω—ã–π –ª–∏ JSON
  - –î–æ–±–∞–≤–∏—Ç –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç `log`-—Å–µ–∫—Ü–∏—é
  - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç `x-ui` –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)
- ‚úÖ –ü—Ä–æ–≤–µ–¥—ë—Ç —Ñ–∏–Ω–∞–ª—å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É:
  - –î–æ–±–∞–≤–∏—Ç —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞–ø–∏—Å—å –≤ `access.log`
  - –û—Ç–ø—Ä–∞–≤–∏—Ç 2 —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram:
    - ‚ö†Ô∏è –ê–ª–µ—Ä—Ç
    - üìä –°–≤–æ–¥–∫–∞

## üí¨ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –≤ –±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥—É `/start` –¥–ª—è —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥.

| –ö–æ–º–∞–Ω–¥–∞           | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------------|----------|
| `/start`          | –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥ |
| `/alertOn`        | –í–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è |
| `/alertOff`       | –í—ã–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è |
| `/list`           | –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö –¥–æ–º–µ–Ω–æ–≤ |
| `/add <–¥–æ–º–µ–Ω>`    | –î–æ–±–∞–≤–∏—Ç—å –¥–æ–º–µ–Ω –≤ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ |
| `/delete <–¥–æ–º–µ–Ω>` | –£–¥–∞–ª–∏—Ç—å –¥–æ–º–µ–Ω –∏–∑ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è |
| `/find <–¥–æ–º–µ–Ω>`   | –ü–æ–∫–∞–∑–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –≤—Ä–µ–º—è, –∫–æ–≥–¥–∞ –¥–æ–º–µ–Ω –ø–æ—Å–µ—â–∞–ª—Å—è |
| `/summary`        | –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–≤–æ–¥–∫—É –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 —á–∞—Å–æ–≤ |
| `/setcron <cron>` | –û–±–Ω–æ–≤–∏—Ç—å cron-–≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–≤–æ–¥–∫–∏ |

---

## üóÇÔ∏è –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ

- üìÅ –õ–æ–≥–∏ –ø–æ—Å–µ—â–µ–Ω–∏–π: `SQLite` –±–∞–∑–∞ `/opt/xray-traffic-bot/db/traffic.db`
- üìù –õ–æ–≥ XRAY: `/opt/xray-traffic-bot/logs/access.log`
- ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏: `.env` —Ñ–∞–π–ª
- üîÑ –õ–æ–≥–∏–∫–∞ —Å–≤–æ–¥–∫–∏: `summary_cron.py`

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ –ª–æ–≥–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö API (–∫—Ä–æ–º–µ Telegram)
- Telegram-–±–æ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –≤–∞–º–∏ `Chat ID`

---

## üõ†Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Ubuntu 20.04 –∏–ª–∏ –≤—ã—à–µ
- root-–¥–æ—Å—Ç—É–ø
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π XRAY/3x-ui (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è)
- –í–∞–ª–∏–¥–Ω—ã–π `config.json` XRAY (–∏–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –µ–≥–æ –ø—Ä–∞–≤–∫–∏)

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ Telegram –¥–æ–ª–∂–Ω—ã –ø—Ä–∏–π—Ç–∏:

1. ‚ö†Ô∏è –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ç–µ—Å—Ç–æ–≤–æ–º –¥–æ–º–µ–Ω–µ `example.com`
2. üìä –°–≤–æ–¥–∫–∞ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 —á–∞—Å–æ–≤

–ï—Å–ª–∏ –≤—ã –Ω–µ –ø–æ–ª—É—á–∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è ‚Äî –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∂—É—Ä–Ω–∞–ª:

```bash
journalctl -u xray-traffic-bot -f
```

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
/opt/xray-traffic-bot/
‚îú‚îÄ‚îÄ bot.py              ‚Üê Telegram-–±–æ—Ç
‚îú‚îÄ‚îÄ summary_cron.py     ‚Üê –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–≤–æ–¥–∫–∏ –ø–æ cron
‚îú‚îÄ‚îÄ .env                ‚Üê –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (—Ç–æ–∫–µ–Ω, chat_id, cron –∏ –ø—Ä.)
‚îú‚îÄ‚îÄ logs/
‚îÇ   ‚îî‚îÄ‚îÄ access.log      ‚Üê XRAY access –ª–æ–≥, —á–∏—Ç–∞–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
‚îî‚îÄ‚îÄ db/
    ‚îî‚îÄ‚îÄ traffic.db      ‚Üê SQLite-–±–∞–∑–∞ —Å –ª–æ–≥–∞–º–∏
```

---
## üßº –£–¥–∞–ª–µ–Ω–∏–µ

```bash
systemctl disable --now xray-traffic-bot
rm -rf /opt/xray-traffic-bot
crontab -l | grep -v summary_cron.py | crontab -
